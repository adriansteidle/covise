IF(NOT COVISE_BUILD_DRIVINGSIM)
  RETURN()
ENDIF()

using(VRML)
using(VehicleUtil)
using(RoadTerrain)
using(XERCESC)

COVISE_FIND_PACKAGE(GDAL)
COVISE_FIND_PACKAGE(FFTW)

covise_find_package(OpenSceneGraph 3.2.0 COMPONENTS osgTerrain)
COVISE_FIND_PACKAGE(osgTerrain)
IF(NOT OSGTERRAIN_FOUND)
  RETURN()
ENDIF()

IF(NOT FFTW_FOUND)
  RETURN()
ENDIF()
IF(NOT GDAL_FOUND)
  RETURN()
ENDIF()

SET(HEADERS
  RoadTerrainPlugin.h
)
SET(SOURCES
  RoadTerrainPlugin.cpp
)

ADD_DEFINITIONS(-DROADTERRAIN_PLUGIN -DIMPORT_PLUGIN)

INCLUDE_DIRECTORIES(
 ${GDAL_INCLUDE_DIR}
 ${FFTW_INCLUDE_DIR}
 ${ZLIB_INCLUDE_DIR}
 ${JPEG_INCLUDE_DIR}
 ${PNG_INCLUDE_DIR}
 ${TIFF_INCLUDE_DIR}
 ${OPENSCENEGRAPH_INCLUDE_DIRS}
 "${COVISEDIR}/src/OpenCOVER"
)

COVER_ADD_PLUGIN_TARGET(RoadTerrain ${HEADERS} ${SOURCES})
COVISE_WNOERROR(RoadTerrain)
TARGET_LINK_LIBRARIES( 
   RoadTerrain
   ${OSGTERRAIN_LIBRARIES}
   ${GDAL_LIBRARIES}
   ${FFTW_LIBRARIES}
   ${EXTRA_LIBS}
)
COVER_INSTALL_PLUGIN(RoadTerrain)

# @file
# 
# CMakeLists.txt for kernel - gpu (coGPU)
#
# @author Blasius Czink

ADD_DEFINITIONS(-DCOVISE_GPU)

if (NOT GLEW_FOUND)
   return()
endif()

INCLUDE_DIRECTORIES(
  ${OPENGL_INCLUDE_DIR}
  ${GLEW_INCLUDE_DIR}
)

SET(COGPU_SOURCES  GPUResourceManager.cpp cudaglinterop.cpp)
SET(COGPU_HEADERS  GPUResourceManager.h)

IF(CUDA_FOUND AND COVISE_USE_CUDA)
  INCLUDE_DIRECTORIES(${CUDA_INCLUDE_DIRS})
  ADD_DEFINITIONS(-DHAVE_CUDA)
  SET(COGPU_SOURCES  ${COGPU_SOURCES} CUDAResourceManager.cpp)
  SET(EXTRA_LIBS ${EXTRA_LIBS} ${CUDA_LIBRARIES})
ENDIF(CUDA_FOUND AND COVISE_USE_CUDA)

ADD_COVISE_LIBRARY(coGPU ${COVISE_LIB_TYPE} ${COGPU_SOURCES} ${COGPU_HEADERS} ${COGPU_CUDA_OBJ})
TARGET_LINK_LIBRARIES(coGPU coConfig ${COVISE_DO_LIB} ${EXTRA_LIBS} ) # ${CMAKE_THREAD_LIBS_INIT} ${CMAKE_DL_LIBS}
COVISE_INSTALL_TARGET(coGPU)
COVISE_INSTALL_HEADERS(gpu ${COGPU_HEADERS})
